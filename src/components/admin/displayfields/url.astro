---
// src/components/admin/displayfields/url.astro
import { truncate, isValidUrl } from "@/lib/utils";

interface Props {
  value: string | undefined | null;
}

const { value } = Astro.props;
---

<div class="inline-block max-w-full">
  {
    value && isValidUrl(value) ? (
      <a
        href={value}
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center gap-1.5 px-3 py-1.5 border border-green-200 dark:border-green-800 rounded-md text-green-400 dark:text-green-800 no-underline text-sm font-medium transition-all max-w-full"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="14"
          height="14"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="flex-shrink-0"
        >
          <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" />
          <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" />
        </svg>
        <span class="flex-1 min-w-0 overflow-hidden text-ellipsis whitespace-nowrap">
          {truncate(value, 40)}
        </span>
      </a>
    ) : (
      <span class="text-muted-foreground italic">{value || "â€”"}</span>
    )
  }
</div>
